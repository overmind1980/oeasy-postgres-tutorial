---
show: step
version: 1.0
enable_checker: true
---

#    å‡åºé™åº_ASC_DESC_ascend_descend_è¯æºè¯æ ¹  

##  å›å¿†

- ä¸Šæ¬¡ ç ”ç©¶äº† æ¡ä»¶è¡¨è¾¾å¼
	-  Conditional Expressions
	- å…·ä½“æ¥è¯´å°±æ˜¯ CASE WHEN
- å¯ä»¥åˆ†ç±»
	- å°†äººç‰©åˆ†ä¸º 
		- æ™º
		- å‹‡
	- å¯å°† æ­¦åŠ›åˆ†æˆ
		- ä¼˜è‰¯ä¸­å·®
	- ä½†æ˜¯æ— æ³•æ ¹æ® æ­¦åŠ›ç­‰çº§ 
		- è¿›è¡Œç­›é€‰
- æƒ³è¦ç­›é€‰ åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

### ç­›é€‰

```
\c sanguo

SELECT 
    name,
    fight,
    CASE
    	WHEN fight>90 THEN 'ä¼˜'
    	WHEN fight>80 THEN 'è‰¯'
    	WHEN fight>90 THEN 'ä¸­'
    	ELSE 'å·®'
    END 
    AS fight_level 
FROM 
    heroes
WHERE
    fight_level = 'å·®'
ORDER BY
	fight_level DESC

;
```

- æ‰§è¡Œå¤±è´¥äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692236561340)

- å°±æƒ³ç”¨æ–°çš„ä¸€åˆ— è¿›è¡Œç­›é€‰ 
	- åº”è¯¥ æ€ä¹ˆåŠå‘¢ï¼Ÿ

### æ–°å»ºä¸€åˆ—

```
\c sanguo

ALTER TABLE 
    heroes
ADD COLUMN
    fight_level VARCHAR(10)
;

UPDATE
    heroes
SET
    fight_level = 
    CASE
    	WHEN fight>90 THEN 'ä¼˜'
    	WHEN fight>80 THEN 'è‰¯'
    	WHEN fight>60 THEN 'ä¸­'
    	ELSE 'å·®'
    END 
;

SELECT 
    name,
    fight,
	fight_level
FROM 
    heroes
WHERE
    fight_level = 'å·®'
ORDER BY
	fight_level DESC
;
```

- æ–°å»ºä¸€åˆ— fight_level
	- åœ¨æŒ‰ç…§ fight_level è¿›è¡Œ ç­›é€‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692237258623)

### æ™ºåŠ›åˆ†çº§

- å°†fightæ‰¹é‡æ›¿æ¢ä¸ºintelligence

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692237372637)

- æ‰§è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692237384766)

- å¯ä»¥å»ºç«‹ä¸€åˆ—å«åšç»¼åˆç´ è´¨å—ï¼Ÿ
- è®©ç»¼åˆç´ è´¨ 
	- ç­‰äº æ­¦åŠ› å’Œ æ™ºåŠ›çš„å¹³å‡å€¼

### ç»¼åˆèƒ½åŠ›

```sql
\c sanguo

SELECT 
    fight,
    intelligence,
    (fight + intelligence) / 2 AS ablities
FROM
    heroes;
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692243815984)

- å¯æ˜¯ç¬¬ä¸€é¡¹çš„ç»“æœ
	- åº”è¯¥æ˜¯62.5
	- ä½†æ˜¯å®é™…ä¸Š å´æ˜¯62
- åŸå› åº”è¯¥æ˜¯ æ•´æ•°é™¤æ³• 
	- ç”¨çš„æ˜¯ åœ°æ¿é™¤
	- å¾—åˆ°çš„å•†
	- å¹¶ä¸” å‰©ä¸‹ä½™æ•°
- åº”è¯¥æ€ä¹ˆåŠï¼Ÿ

### æµ®ç‚¹æ•°é™¤æ³•

```sql
\c sanguo

SELECT 
    fight,
    intelligence,
    (fight + intelligence) / 2.0 AS ablities
FROM
    heroes;
```

- æŸ¥è¯¢ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692244376829)

- å¯ä»¥å¯¹è¿™ä¸ªç»“æœå†ä½¿ç”¨å››èˆäº”å…¥å—ï¼Ÿ

### æŸ¥æ‰¾å‡½æ•°

- https://www.postgresql.org/docs/15/functions-math.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692244664222)

### roundå‡½æ•°

```sql
\c sanguo

SELECT 
    fight,
    intelligence,
    round((fight + intelligence) / 2.0) AS ablities
FROM
    heroes;
```

- å–æ•´ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692244739173)

- é™¤æ­¤ä¹‹å¤– 
	- è¿˜æœ‰å…¶ä»–å–æ•´æ–¹æ³•å—ï¼Ÿ

### åœ°æ¿æ³•

- æŒ‰ç…§ åœ°æ¿çš„æ–¹å¼ å–æ•´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692244838870)

- å…·ä½“ç”¨æ³•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692258104557)

### å¤©èŠ±æ¿æ–¹æ³•

- æŒ‰ç…§å¤©èŠ±æ¿çš„æ–¹å¼å–æ•´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692244869737)

- å®é™…æ“ä½œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230817-1692258119233)

## æ€»ç»“
- è¿™æ¬¡ æŸ¥è¯¢äº† ç»¼åˆç´ è´¨
	- æ•°å€¼ æ¥è‡ªäº æ­¦åŠ›å’Œæ™ºåŠ› çš„ å¹³å‡å€¼
	- å¹³å‡å€¼ æ¥è‡ª æ•´æ•°åœ°æ¿é™¤ çš„ç»“æœ
	- å°† é™¤æ•° è®¾ç½®ä¸º 2.0 ä¹‹å
	- é™¤æ³•æ¨¡å¼ å˜ä¸º æµ®ç‚¹æ•°é™¤æ³•
		- å•†ä¸ºæµ®ç‚¹æ•°
- å•†å¯ä»¥ ç”¨å„ç§æ–¹å¼å–æ•´
	- round å››èˆäº”å…¥
	- ceil å¤©èŠ±æ¿
	- åœ°æ¿
- èƒ½å¦å¯¹ æµ®ç‚¹æ•°ç±»å‹ å’Œ æ•´æ•°ç±»å‹ 
	- è¿›è¡Œ ç±»å‹è½¬åŒ–å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ŸğŸ‘‹ğŸ»