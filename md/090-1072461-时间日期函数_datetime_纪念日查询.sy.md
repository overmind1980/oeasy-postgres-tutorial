---
show: step
version: 1.0
enable_checker: true
---

#   æ—¶é—´æ—¥æœŸç±»å‹_date_time_æ•°æ®ç±»å‹ 
 

##  å›å¿†

- ä¸Šæ¬¡äº†è§£äº† ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹
	- æ—¥æœŸ
	- date

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230901-1693572206453)

- ä½¿ç”¨æ—¥æœŸä¹‹å 
	- å¯ä»¥å¯¹äºæ—¥æœŸç±»å‹çš„å€¼
	- è¿›è¡Œç›¸åº”çš„åŠ å‡
	- å¾—åˆ°ç›¸åº”çš„æ—¥æœŸ
- è¿™æ ·çš„æ—¥æœŸåŠ å‡æœ‰ä»€ä¹ˆç”¨å¤„å—ï¼ŸğŸ¤”

### çºªå¿µæ—¥æŸ¥æ‰¾

```
\c sanguo

SELECT
	'160/7/17' AS birth_day,
	'160/7/17'::date + 100 AS hundred_days
;
```

- æ ¹æ®ç”Ÿæ—¥ 
	- å¯ä»¥æŸ¥æ‰¾åˆ° ç™¾æ—¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693618177056)

- æ»¡æœˆ åº”è¯¥å¦‚ä½•æŸ¥è¯¢å‘¢ï¼Ÿ

### æŸ¥è¯¢æ–‡æ¡£

- INTERVAL ç±» 
	- https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-INTERVAL-INPUT

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693618644641)

- å¯ä»¥ä½¿ç”¨intervalçš„æ–¹å¼ è®¾ç½® æ—¶é—´é—´éš”

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693618619016)

- ç„¶åä¸ åŸå§‹ æ—¥æœŸç›¸åŠ 

### interval


```
\c sanguo

SELECT
	'160/7/17' AS birth_day,
	('160/7/17'::date + '1 month'::interval)::date AS hundred_days
;
```

- æŸ¥è¯¢ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693618581975)

- å¯ä»¥å°† æ—¥æœŸå·® è½¬åŒ–ä¸º intervalå—ï¼Ÿ

### æ—¥æœŸå·®

```
SELECT 
	('160/7/16'::date - '161/5/13'::date) :: interval
;
```

- æ— æ³•è½¬åŒ–

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693619394081)

- è¿™æ€ä¹ˆåŠï¼Ÿ

### æœç´¢

- æœç´¢ 
	- date function

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693622506982)

### æ‰¾åˆ°åŸå› 

- date ç±»å‹ è¿›è¡Œå‡æ³•è¿ç®—
	- è¿”å›å€¼ æ˜¯ æ•´æ•°ç±»å‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693622532891)

- å¦‚ä½• å¾—åˆ° ä¸¤è€…æ‰€å·®å¹´ä»½å‘¢ï¼Ÿ

### é™¤ä»¥365

```
\c sanguo

SELECT 
	('160/7/16'::date - '161/5/13'::date) / 365
;
```

- å¾—åˆ°ç»“æœ0

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693622975712)

- å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ˜¯ æ•´æ•°é™¤æ³•

### æµ®ç‚¹æ•°é™¤æ³•

```
\c sanguo

SELECT 
	('160/7/16'::date - '161/5/13'::date) / 365.0
;
```

- å¾—åˆ°ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693623038791)

- ç¡®å®å¾—åˆ°äº† æµ®ç‚¹æ•°
- å¦‚ä½• è®© ç»“æœä¸º æ­£ å‘¢ï¼Ÿ

### ç»å¯¹å€¼ abs

```
\c sanguo

SELECT 
	abs('160/7/16'::date - '161/5/13'::date) / 365.0
;
```

- å¾—åˆ°ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693623110041)

- è¿™ä¸ªæ•°å­— å¯ä»¥è¿›è¡Œå››èˆäº”å…¥å—ï¼Ÿ

## æ€»ç»“

- è¿™æ¬¡ä½¿ç”¨äº† æ—¥æœŸç±»å‹çš„è¿ç®—
	- date è¿˜å¯ä»¥åŠ  interval
		- year
		- month
		- week
		- day
- date - date å¾—åˆ°ä¸€ä¸ª int ç±»å‹çš„æ•°å­—
	- åº”è¯¥å¦‚ä½•è®¡ç®—å¹´ä»½å‘¢ï¼Ÿ
	- å¯ä»¥å¯¹ç»“æœè¿›è¡Œå››èˆäº”å…¥å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ŸğŸ‘‹ğŸ»
