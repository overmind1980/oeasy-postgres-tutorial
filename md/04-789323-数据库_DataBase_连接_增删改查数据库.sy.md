---
show: step
version: 1.0
enable_checker: true
---

# 数据库(DataBase)的管理

## 回忆

- 上次研究的是数据库database
- 是用数据库管理程序(dbms)去管理数据库

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592407879)

- 可以新建数据库
    - CREATE DATABASE
- 可以查询数据库
    - \l
    - \l oeasy*
- 不会了就去查帮助
  - help
	- 是总体帮助
  - \h
	- 是查询所有SQL语句
  - \h CREATE DATABASE
    - 是查询具体SQL命令
- 如何连接数据库呢？🤔

### 连接数据库

- 先查一下

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670591121225)

- 找到各种psql命令

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650420652037)

- \c 应该就是关于连接的命令
- <kbd>q</kbd>退出查询结果
- 我们来试试

### 连接数据库

- psql 
  - 作为前端(front-end)
  - 使用 postgres用户 连接到了 oeasydb

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650420953438)

- postgres服务 
  - 作为后端(back-end)
  - 使用5432端口
  - 通过套接字
  - 接收前端发出的请求
  - 执行新建数据库的SQL命令
  - 将结果反馈给前端
- 这样
	- 真的就建立了一个属于自己的数据宝库
- 既然这样
	- 就多建几个

### 宝库

- 法宝一挥建立起了o2zdb
	- 这很轻松

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592641224)

- 不过SQL命令的字母为什么都要大写呢？
- 小写可以吗？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592768438)

- 小写也是可以执行的
- 到底应该大写还是小写？

### 大写的SQL命令

- SQL命令 的字母确实都是大写的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592704043)

- 但是数据库的名字呢？
- 我们大写试试

### 数据库的名字

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592931969)

- 建库语句中
	- 用的是大写名字

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670592977435)

- SQL语句
	- 命令大写
	- 对象小写

### 构建起来

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650422796729)

- 真的构建起来了吗？

### 观察

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650423223511)

- 真的构建起来了
- 但现在宝库太多了
	- 能否删除数据库
- 先<kbd>q</kbd>退出查询结果

### 先查手册

- 蓝色中括号里面的东西是可省略的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650078444573)

- 简化成
	- DROP DATABASE database_name

### 动手

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650423440333)

- 真的都删除了
- 现在o开头的数据库就一个oeasydb了
- 把他也删掉

### 删除

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650423136928)

- 删除失败了
- 不能删除当前正连着的数据库

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670593658934)

- 不能锯掉自己所在的树枝

### 绕路

- 那我们就连到别的数据库看看

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650423783213)

- 进入postgres这个数据宝库
	- 然后再删
	- 好像删除了
	- 确认一把

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650423860691)

- 确实四个数据库都删空了
- 再返回去看看手册

### IF EXIST

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650078444573)

- 蓝色框里面有个IF EXIST 如何理解？
  - 中括号可省略
  - IF EXIST的意思是`如果存在`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650424132000)

- 如果要删除的数据库存在
	- 那就直接删了
- 如果要删除一个不存在的数据库呢？

### 不存在的

- 没有IF EXIST
  - 直接报错ERROR
  - ERROR错误是这个oeasydb不存在
  - 这问题挺严重

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670593813280)

- 有IF EXIST
  - 发出提示不报错
  - 提示NOTICE这个oeasydb不存在
  - 写命令的知道可能oeasydb不存在
  - 就是试试
  - 所以不报ERROR
  - 可以继续往下走

###  帮助中的url

- 我们按照手册中给出URL去看看

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650079043653)

- 复制网址

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650425490757)

### 网页文档

- 红色的标记📌标明了帮助的版本
	- 可以切换看看其他版本

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650079275235)

- 我们用的是postgresg12

### 文档细节

- DROP DATABASE 是SQL命令

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650079715240)

- 这个命令有两个参数
  - IF EXISTS
    - 如果有才删
  - name
    - 数据库的名字
- 如果我想一次建两个数据库呢？

### 建立两个数据库

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650080011688)

- 想要一句话搞定是不行的
- 分成两句是可以的么？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650080042152)

- 这告诉我们
  - 饭要一口一口吃
  - 不要想要一口吃个胖子
- 胖子:“我找谁惹谁了？！”
- 除了新建(CREATE)、删除(DROP)之外
  - 还有个ALTER 呢！
  - 怎么用呢？

### 查文档

- 没有思路了就去help

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650424386110)

- 大致明白了
  - 要用的是红色框起的那句
- 可是
  - 目前有些什么数据库可以进行修改呢？

### 查询

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650424861999)

- 这些都是系统的数据库还有模板
- 得新建一个再改

### 具体修改

- 注意提示符
  - 从=的位置开始
  - =号就是等着你输入

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221209-1670594132566)

- 注意中划线
  - 不是命令的开始位置
  - 意味着前面有命令还没结束
  - 直到最后的分号才结束
- 换行缩进是为了清晰
  - 一般缩进4个空格
  - 没有换行缩进的话程序也好使
- 数据库还有什么特点呢?

### 重温大小写

- 即使建立对象的时候
	- 使用大写字母
- 真正建立的数据库对象
	- 还是小写字母的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220615-1655281214757)

- 有点举重若轻的意思
	- 好像和python一样不喜欢大写字母
	- 总结一下吧

## 总结

- 这次研究的是数据库database
- 可以进行四种操作(增删改查连接)
  - 增
    - CREATE DATABASE
  - 删
    - DROP DATABASE
  - 改
    - ALTER DATABASE
  - 查
    - \l
    - \l oeasy*
  - 连接
    - \c
- 拥有了数据的宝库
  - 可是，如何存储宝贝呢？🤔
- 下次再说 👋
