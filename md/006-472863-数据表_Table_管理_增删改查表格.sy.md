---
show: step
version: 1.0
enable_checker: true 
---

# æ•°æ®è¡¨(Table)çš„ç®¡ç†

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶çš„æ˜¯
	- æ•°æ®åº“database
- å¯ä»¥è¿›è¡Œäº”ç§æ“ä½œ(å¢åˆ æ”¹æŸ¥è¿æ¥)

|æ“ä½œ|å‘½ä»¤|
|---|---|
|å¢ | CREATE DATABASE|
| åˆ |DROP DATABASE|
|æ”¹ | ALTER DATABASE|
|æŸ¥ | \l æˆ–è€… \l oeasy*|
|è¿æ¥ |\c |

- æ‹¥æœ‰äº†æ•°æ®çš„å®åº“
  - `å¦‚ä½•`å­˜å‚¨å®è´å‘¢ï¼ŸğŸ¤”

### æ•°æ®è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220416-1650102264659)

- å®è´æ˜¯å­˜åœ¨å®ç®±é‡Œé¢çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650426112818)

- å®ç®±å¯¹åº”ä»€ä¹ˆå‘¢ï¼Ÿ

### TABLE

- å®ç®± å¯¹åº”ç€ 
	- table
- table å°±æ˜¯
	- ä¸€å¼ æ¡Œå­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650151790170)

- æ¡Œå­ ä¸Šé¢
	- å¯ä»¥æ”¾çš„è¡¨æ ¼
	- ä¹Ÿå« table

### å¹³å¹³æ•´æ•´

- è¿™éƒ½æ˜¯æ”¾åœ¨æ˜é¢çš„
	- æ˜æ˜ç™½ç™½çš„ä¸œè¥¿

- å¹³å¹³æ•´æ•´ çš„æ¡Œå­
	- å–„äº å¡«è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650151861941)

- æ¯”å¦‚
	- ç™»è®°è¡¨
	- æŠ¥åè¡¨
	- ç­¾åˆ°è¡¨
- é‚£å¦‚ä½•å»ºç«‹ä¸€å¼ è¡¨å‘¢ï¼Ÿ

### æŸ¥è¯¢å¸®åŠ©

- æ•°æ®å®åº“
	- å¯¹åº”ç€æ•°æ®åº“DataBase

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650153626819)

- æ•°æ®åº“DataBaseä¸­çš„å®ç®±
	- å°±æ˜¯è¡¨(Table)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650154289049)

- æ€æ ·æ„é€ ä¸€ä¸ªå®ç®±å‘¢ï¼Ÿ

### CREATE TABLE

- é¦–å…ˆå¾—è¿›å…¥æˆ‘ä»¬çš„å®åº“
	- ç„¶åæ‰èƒ½æ„é€ å®ç®±

```
CREATE DATABASE
    oeasydb
;
\c oeasydb
CREATE TABLE
   oeasy_table
;
```

- æŠ¥é”™äº†
	- æŸ¥è¯¢ä¸€ä¸‹è¯¦ç»†å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240416-1713243096739)

### åˆ†æä¸€ä¸‹

- æŠ¥é”™
	- ä¸æ˜¯æˆ‘ä»¬æ— èƒ½çš„æ ‡å¿—
	- è€Œæ˜¯æˆ‘ä»¬åŠªåŠ›çš„è§è¯
	- æ›´æ˜¯è¿›æ­¥çš„é˜¶æ¢¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650154759148)

- è¯¦ç»†åˆ†æä¸€ä¸‹...

### è¯¦ç»†å¸®åŠ©

- <kbd>G</kbd>
	- ç¿»åˆ°æœ€å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650154946009)

- å»å®˜ç½‘æ‰¾ä¾‹å­å»
	- https://www.postgresql.org/docs/12/sql-createtable.html

### è¯­æ³•è§„åˆ™

- è¡¨ååé¢ å¿…é¡»åŠ æ‹¬å·

```
CREATE TABLE
   oeasy_table()
;
```


- è¿”å›è¯­å¥CREATE TABLE
	- è¿™æ ·å°±å¯ä»¥åˆ›å»ºè¡¨æ ¼äº†å—?

### æŸ¥å¸®åŠ©

- `\?`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650157449491)

- \d åº”è¯¥å¯ä»¥
	- æŸ¥è¯¢è¡¨æ ¼

### å®æ“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240524-1716527275994)

- `\d`
  - æŸ¥è¯¢æ‰€æœ‰çš„è¡¨æ ¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240524-1716527370088)

- å¦‚æœ æƒ³æŸ¥
	- è¡¨æ ¼çš„`è¯¦ç»†`ä¿¡æ¯å‘¢ï¼Ÿ

### æŸ¥è¯¢å…·ä½“çš„è¡¨æ ¼

- è¿˜æ˜¯\d 
	- ä½†è¦åŠ ä¸Šå‚æ•°
    - å‚æ•°å°±æ˜¯è¡¨æ ¼çš„åå­—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240524-1716527053987)

- è¡¨æ ¼é‡Œé¢
	- å¯ä»¥æœ‰ å­—æ®µå—?

### ä¾‹å­

- è¡¨æ ¼é‡Œ
	- å¿…é¡»å®šä¹‰åˆ—
	- Column
- åˆ—(Column)çš„åˆ—è¡¨
	- å®šä¹‰åœ¨ æ‹¬å·é‡Œé¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650155367899)

- æ¯ä¸€åˆ—çš„å®šä¹‰åŒ…æ‹¬
  - åˆ—å
  - åˆ—çš„æ•°æ®ç±»å‹
  - æ¯”å¦‚çº¢è‰²æ¡†ä¸­çš„
    - varchar(40)
    - varchar(10)
- varcharæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
  - ç»§ç»­æŸ¥è¯¢

### varchar

- https://www.postgresql.org/docs/12/datatype.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650155556383)

- varchar(n)æ˜¯
	- variable é•¿åº¦å¯å˜çš„
	- char å­—ç¬¦ä¸²
	- èŒƒå›´é™åˆ¶ åœ¨nä»¥å†…
- æˆ‘ä»¬å»ºä¸ª `ä»€ä¹ˆ`è¡¨ å‘¢ï¼Ÿ

### login

- æƒ³å»ºç«‹ä¸€ä¸ª
	- `login`è¡¨
- `login`è¡¨é‡Œ æ€»å…±ä¸¤åˆ—
    - username
    - password

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650155715218)

- æˆ‘ä»¬æ¥çœ‹çœ‹CREATE TABLE 
	- è¯­æ³•ä¸­çš„å¯¹åº”å…³ç³»

### å¯¹åº”

- æŸ¥çœ‹æ–‡æ¡£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650428778831)

- column_nameåŒ…æ‹¬æœ‰
  - username
  - password
- data_typeå‡ä¸º
  - varchar(10)
  - 10ä»¥å†…çš„å¯å˜é•¿å­—ç¬¦ä¸²

```sql
CREATE TABLE login(
 username varchar(10),
 password varchar(10)
);
```

- ä¸¤åˆ—ä¹‹é—´
	- ç”¨é€—å·åˆ†å‰²

### CREATE TABLE

- ç¬¬1è¡Œ
  - <span style="border:3px solid red;color:#fff;background:black">=</span>å·æ„å‘³ç€ ç­‰ç€ä½ è¾“å…¥
  - æ˜¯ è¾“å…¥çš„ å¼€å§‹å¤„
  - ç»“å°¾å¤„æœ‰ä¸€ä¸ª(

- ç¬¬2è¡Œ
  - <span style="border:3px solid yellow;color:#fff;background:black">(</span>çš„æ„æ€æ˜¯ç›®å‰è¿›äº†æ‹¬å·é‡Œé¢
  - å½•å…¥äº†ç¬¬ä¸€åˆ—
	- username 
	- ç±»å‹ varchar(10)
  - åœ¨ç»“å°¾å¤„è¾“å…¥é€—å·
  - ç„¶åå›è½¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650426675058)

- ç¬¬3è¡Œ
  - <span style="border:3px solid yellow;color:#fff;background:black">(</span>çš„æ„æ€æ˜¯ç›®å‰è¿˜åœ¨æ‹¬å·é‡Œé¢
  - å½•å…¥äº†
	- å¦ä¸€åˆ—password
	- ç±»å‹ varchar(10)
  - åé¢æ²¡æœ‰é€—å·
  - ä¹Ÿå°±æ˜¯è¯´æœ¬åˆ—ä¸ºæœ€åä¸€åˆ—
- ç¬¬4è¡Œ
  - <span style="border:3px solid yellow;color:#fff;background:black">(</span>çš„æ„æ€æ˜¯ ç›®å‰è¿˜åœ¨æ‹¬å·é‡Œé¢ 
  - è¾“å…¥)åŒ¹é…ä¸Šç€ç¬¬1è¡Œç»“å°¾å¤„çš„(
  - å°†æ‹¬å·éƒ¨åˆ†ç»“æŸ
- ç¬¬5è¡Œ
  - <span style="border:3px solid green;color:#fff;background:black">-</span>æ˜ç¡®()æ‹¬å·éƒ¨åˆ† å·²ç»ç»“æŸ
    - ä½†æ˜¯æ•´ä¸ªè¯­å¥è¿˜æ²¡æœ‰ç»“æŸ
  - ;æ˜ç¡®è¯­å¥ç»“æŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650427574193)

- \d table_name
  - dçš„æ„æ€æ˜¯describeæè¿°
  - æè¿°æŒ‡å®šçš„è¡¨æ ¼
  - æè¿°è¿™ä¸ªè¡¨æœ‰å‡ åˆ—
  - éƒ½æ˜¯ä»€ä¹ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650427730243)

- æè¿°æ”¯æŒé€šé…ç¬¦(*/?)
- åˆ—åæœ‰å¤§å°å†™çš„åŒºåˆ«å—ï¼Ÿ

### åˆ—å

```sql
CREATE TABLE aa(
	BB varchar(10),
	CC int
)
;
```

- å³ä½¿å®šä¹‰çš„æ—¶å€™ç”¨çš„æ˜¯å¤§å†™å­—æ¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221210-1670640445914)

- æ–°è¡¨çš„åˆ—å 
	- ä¾ç„¶ æ˜¾ç¤ºçš„æ˜¯å°å†™å­—æ¯
- å† å¤šå»ºå‡ ä¸ªè¡¨

### å»ºè¡¨

```sql
CREATE TABLE oeasy_table_1();
CREATE TABLE oeasy_table_2();
CREATE TABLE oeasy_table_3();
```

- è¡¨å åªèƒ½ç”¨ å°å†™å­—æ¯
	- ç”¨ ä¸‹åˆ’çº¿ åˆ†å‰²å•è¯
	- äºæ˜¯ ä½¿ç”¨è›‡å½¢å‘½åæ³• 
	- å‘½ååˆ—å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678367587697)

- åˆå»ºäº†3ä¸ªè¡¨
	- ä¹Ÿå°±æ˜¯3ä¸ªå®ç®±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657804096801)

- å¯ä»¥describeä¸€ä¸‹ä¹ˆï¼Ÿ

### describe

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221210-1670640346406)

- æ€»å…±5ä¸ªè¡¨
- å¯ä»¥å¯¹è¡¨è¿›è¡Œç­›é€‰å—ï¼Ÿ

### å¯¹è¡¨ç­›é€‰

- `*` ä»£è¡¨
	- 0åˆ°ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650452798001)

- è¿™ä¸‰ä¸ªè¡¨ éƒ½æ˜¯æ²¡æœ‰åˆ—çš„
	- æƒ³åˆ é™¤æ‰tableçš„è¯
- å¦‚ä½•åˆ é™¤å‘¢ï¼Ÿ

### å…ˆæŸ¥å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650156305586)

- å…ˆæ‰¾DROP
	- å†æ‰¾TABLE

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650156277650)

### åˆ é™¤

```
\d 
DROP TABLE
	aa;
\d
```

- æ‰§è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678367800936)

- aaè¡¨
	- åˆ é™¤æˆåŠŸ

### å†’å¤±é¬¼

- ä½†æ˜¯
	- æƒ³è¦åˆ é™¤ä¸å­˜åœ¨çš„TABLE
	- å°±ä¼šæŠ¥é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678367860264)

- è¿™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

### è¯•ç€æ¥

- åŠ ä¸ŠIF EXISTS
  - å†åˆ é™¤å°±ä¼šæç¤º(NOTICE)
  - ä¸æŠ¥é”™(ERROR)
- è¿™å’ŒDROP DATABASE ä¸€æ ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678367903298)

- è€Œä¸”CERATE TABLEé‡Œé¢
	- ä¹Ÿæœ‰ä¸ªå¾ˆç±»ä¼¼çš„å‚æ•°

### IF NOT EXISTS

- åˆ é™¤çš„æ—¶å€™
  - æ€•è¡¨ä¸å­˜åœ¨
- å»ºç«‹çš„æ—¶å€™
  - æ€•è¡¨å·²ç»æœ‰äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650428323594)

- æˆ‘ä»¬æ¥è¯•è¯•

### å»ºç«‹è¡¨æ ¼

- å¦‚æœä¸IFçš„è¯
  - æœ¬æ¥å°±æœ‰è¡¨æ²¡æ³•å»ºç«‹å°±ä¼šæŠ¥é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650452915885)

- å¦‚æœæœ‰IFçš„è¯
  - æœ¬æ¥æœ‰è¡¨
  - æ²¡æ³•å»ºç«‹å°±åªæ˜¯æŠ¥æç¤º(NOTICE)
  - è¿˜èƒ½ç»§ç»­
- é‚£æˆ‘å°±æƒ³å»ºç«‹å·²ç»æœ‰çš„è¡¨æ ¼
- æ€ä¹ˆåŠï¼Ÿ

### é¡ºåº

```sql
CREATE TABLE oeasy_table_1();
DROP TABLE oeasy_table_1();
```

- å…ˆåˆ é™¤å†å»ºç«‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650453010680)

- å¯ä»¥ç›´æ¥ä¿®æ”¹è¡¨æ ¼ä¹ˆï¼Ÿ

### å…ˆæŸ¥å¸®åŠ©

- å…ˆæŸ¥ALTER
	- å†æŸ¥TABLE

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650156671151)

- å’ŒDATABASEå·®ä¸å¤š
	- éƒ½æ˜¯ALTER XXX name RENAME TO new_name

### åŠ¨æ‰‹æ“ä½œ


- å°†tableæ”¹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678368187411)

- å¦‚æœ å¾…æ”¹åçš„table ä¸å­˜åœ¨
	- æ€ä¹ˆåŠï¼Ÿ

### IF EXISTS

- ä¹Ÿå¯ä»¥åŠ IF EXISTS

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650429146119)

- å¯ä»¥æŠŠåå­—æ”¹æˆæœ¬èº«ä¹ˆï¼Ÿ

### æ”¹æˆæœ¬èº«ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650453356528)

- ä»–è¯´æ˜¯ä¸è¡Œçš„
	- å› ä¸ºç›®æ ‡çš„tableåå·²ç»è¢«å ç”¨äº†
	- å°±æ˜¯è¢«è‡ªå·±å ç”¨äº†
- å¯æ˜¯æˆ‘å°±æƒ³æ”¹æˆæœ¬èº«ï¼ï¼ï¼ğŸ˜ 

### ç»•é“

- è¦å…ˆç”¨<kbd>â†‘</kbd>æ‰¾åˆ°ä¹‹å‰çš„å»ºè¡¨å‘½ä»¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650453433230)

- ç„¶åç»•é“å…ˆæŠŠ`oeasy_table_2`è¿™ä¸ªåå­—è®©å‡ºæ¥
	- å˜æˆäº†`oeasy_table_20`
	- å†æ”¹å›åˆ°`oeasy_table_2`
	- æœ€ç»ˆæˆåŠŸï¼ï¼ï¼
- å¦‚æœä¸¤ä¸ªè¡¨æƒ³è¦äº’æ¢åå­—
	- å°±å¯ä»¥äº†é€šè¿‡ä¸€ä¸ªtempè¡¨å®ŒæˆğŸ˜„

### æ€»ç»“

- æ•´ä¸ªçš„ç»“æ„
  - postgresæ˜¯ ç”Ÿæˆæ•°æ®å®åº“çš„ 
  - æ³•å®
- æ³•å® 
	- å¯ä»¥ç”Ÿæˆ 
	- æ•°æ®å¤§å®åº“(database)
- æ•°æ®å¤§å®åº“é‡Œé¢
	- æœ‰å®ç®±(table)
- å®ç®±é‡Œé¢æœ‰æ ¼å­
	- ä¹Ÿå°±æ˜¯åˆ—(column)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650453524590)

- tableå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥

|åŠŸèƒ½|ä½œç”¨|
|---|---|
|æ–°å»ºè¡¨æ ¼ |CREATE TABLE |
|åˆ é™¤è¡¨æ ¼| DROP TABLE |
| ä¿®æ”¹è¡¨æ ¼ | ALTER TABLE |
|è¡¨æ ¼æè¿° | \d <br/> \d oeasy* <br/>\d ?? <br/>|
- æœ‰äº†å®ç®±
  - å¦‚ä½•çœ‹å®ç®±(table)é‡Œé¢
  - æœ‰äº›ä»€ä¹ˆ`å®è´`å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹
