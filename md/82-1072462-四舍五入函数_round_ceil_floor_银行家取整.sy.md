---
show: step
version: 1.0
enable_checker: true
---

#   æ—¶é—´æ—¥æœŸç±»å‹_date_time_æ•°æ®ç±»å‹ 
 

##  å›å¿†

- ä¸Šæ¬¡ä½¿ç”¨äº† æ—¥æœŸç±»å‹çš„è¿ç®—
	- date è¿˜å¯ä»¥åŠ  interval
		- year
		- month
		- week
		- day
- date - date å¾—åˆ°ä¸€ä¸ª int ç±»å‹çš„æ•°å­—
	- åº”è¯¥å¦‚ä½•è®¡ç®—å¹´ä»½å‘¢ï¼Ÿ
	- å¯ä»¥å¯¹ç»“æœè¿›è¡Œå››èˆäº”å…¥å‘¢ï¼ŸğŸ¤”

### æœç´¢ 

- æœç´¢ round
	- https://www.postgresql.org/docs/15/functions-math.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693625016615)

- å…ˆè¯•è¯• å››èˆäº”å…¥
	- round

### round
```
\c sanguo

SELECT 
	round(3.1415926),
	round(3.1415926,2)
;
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693625296510)

### å¦‚ä½•ç†è§£ å››èˆäº”å…¥

```
\c sanguo

SELECT 
	round(3.14,1),
	round(3.149999999,1),
	round(3.15,1)
;
```

- ç»“æœç¡®å®æ˜¯å››èˆäº”å…¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693625860918)

### ç»†çœ‹å¸®åŠ©

- round å‡½æ•°
	- å¯¹äº ä¸€èˆ¬çš„æµ®ç‚¹å‹ 
		- ä½¿ç”¨ round to nearest integer
	- å¯¹äº åŒç²¾åº¦æµ®ç‚¹å‹ 
		- ä½¿ç”¨round to nearest even

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693626037806)

- è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

### æœç´¢ 

- ä¸æ¸…æ¥šå°±å»æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693626124478)

- æ€»å…±æœ‰ å…­ç§å–æ•´æ–¹å¼
	1. å‘é›¶èˆå…¥ round towards zero (round down)
		- å‘é›¶èˆå…¥æ˜¯æŒ‡ç›´æ¥æˆªå»å°æ•°ç‚¹åçš„æ•°å­—
		- ä¸è¿›è¡Œå››èˆäº”å…¥
		- 3.1415926
			- å‘é›¶èˆå…¥åä¸º3.0
	2. å‘ä¸Šèˆå…¥ round up
		- å‘ä¸Šèˆå…¥æ˜¯æŒ‡å°†å°æ•°ç‚¹åçš„æ•°å­—å…¨éƒ¨è¿›ä½
		- ä¸è¿›è¡Œå››èˆäº”å…¥
		- 3.1415926
			- å‘ä¸Šèˆå…¥åä¸º4.0
	3. å››èˆäº”å…¥ round to nearest
		- å››èˆäº”å…¥æ˜¯æŒ‡å°†å°æ•°ç‚¹åçš„æ•°å­—è¿›è¡Œå››èˆäº”å…¥
		- å¦‚æœå°æ•°ç‚¹åçš„æ•°å­—å¤§äºç­‰äº5ï¼Œåˆ™è¿›ä½
		- å¦åˆ™èˆå»
		- å¯¹äº3.1415926
			- å››èˆäº”å…¥åä¸º3.14
	4. å››èˆäº”å…¥ round to nearest
		- å››èˆäº”å…¥æ˜¯æŒ‡å°†å°æ•°ç‚¹åçš„æ•°å­—è¿›è¡Œå››èˆäº”å…¥
		- å¦‚æœå°æ•°ç‚¹åçš„æ•°å­—å¤§äºç­‰äº5ï¼Œåˆ™è¿›ä½
		- å¦åˆ™èˆå»
		- å¯¹äº3.1415926
			- å››èˆäº”å…¥åä¸º3.14
	5. å‘å¶æ•°èˆå…¥ï¼ˆé“¶è¡Œå®¶èˆå…¥ï¼‰ round to nearest even
		- å‘å¶æ•°èˆå…¥æ˜¯æŒ‡å°†å°æ•°ç‚¹åçš„æ•°å­—è¿›è¡Œå››èˆäº”å…¥
			- å¹¶ä¸”å¦‚æœå°æ•°ç‚¹åçš„æ•°å­—ç­‰äº5
			- åˆ™å°†å‰ä¸€ä½æ•°å­—è¿›è¡Œå¥‡å¶æ€§åˆ¤æ–­
				- å¦‚æœå‰ä¸€ä½æ•°å­—ä¸ºå¶æ•°ï¼Œåˆ™èˆå»5
				- å¦‚æœå‰ä¸€ä½æ•°å­—ä¸ºå¥‡æ•°ï¼Œåˆ™è¿›ä½
			- å¯¹äº3.1450ï¼Œå‘å¶æ•°èˆå…¥åä¸º3.14
			- å¯¹äº3.1550ï¼Œåˆ™å‘å¶æ•°èˆå…¥åä¸º3.16
			- å‘å¶æ•°èˆå…¥ä¹Ÿè¢«ç§°ä¸ºé“¶è¡Œå®¶èˆå…¥
			- å› ä¸ºè®¸å¤šé“¶è¡Œæœºæ„ä½¿ç”¨è¿™ç§èˆå…¥æ–¹å¼
	6. å‘å¥‡æ•°èˆå…¥ round to odd
		- é€»è¾‘ä¸5 ç›¸å¯¹
		- ä¸å¸¸ç”¨

### å®éªŒ

```
\c sanguo

SELECT 
	round(3.1450,2),
	round(3.1550,2)
;
```

- å¥½åƒå¹¶æ²¡æœ‰æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693627787172)

- å› ä¸ºä½¿ç”¨çš„æ˜¯
	- å•ç²¾åº¦æµ®ç‚¹æ•°
- å†æ¬¡è§‚å¯Ÿ å¸®åŠ©

### cast

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693628071134)

- åŒç²¾åº¦ é“¶è¡Œå®¶å–æ•´
	- åé¢ä¸èƒ½è·Ÿå°æ•°ä½æ•°

### é“¶è¡Œå®¶å–æ•´çš„éªŒè¯

```
\c sanguo

SELECT 
	round(314.50::double precision),
	round(315.50::double precision)
;
```

- éªŒè¯æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693628245593)

- å¯ä»¥ä½¿ç”¨ 
	- roundup 
	- rounddown
	- å—ï¼Ÿ

### round up down

```
\c sanguo

SELECT 
	ceil(0.01),
	floor(0.99)
;
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230902-1693628491855)

###  æ€»ç»“

- è¿™æ¬¡ç ”ç©¶äº† postgresçš„å–æ•´
	- round
		- ä¸€èˆ¬æ˜¯æœ€è¿‘æ•°å–æ•´ å››èˆäº”å…¥
		- å¯¹äº åŒç²¾åº¦å–æ•´
			- ä½¿ç”¨ nearest to even
			- é“¶è¡Œå®¶å–æ•´
	- ceil 
		- å¤©èŠ±æ¿
	- floor
		- åœ°æ¿
- å¯¹äº æ—¥æœŸç±»å‹æ•°æ®çš„å·®
	- å¯ä»¥ç›´æ¥ å¾—åˆ°å¹´ä»½å—ï¼Ÿ

```
\c sanguo

SELECT 
	'160/7/16'::date
;
```

- ä¸‹æ¬¡å†è¯´ï¼ŸğŸ‘‹ğŸ»
