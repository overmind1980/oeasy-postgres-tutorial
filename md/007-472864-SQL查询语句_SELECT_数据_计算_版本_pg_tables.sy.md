---
show: step
version: 1.0
enable_checker: true
---

# æŸ¥è¯¢æ•°æ® SELECT

## å›å¿†

- æ•´ä¸ªçš„ç»“æ„
  - postgresæ˜¯ ç”Ÿæˆæ•°æ®å®åº“çš„ 
  - æ³•å®
- æ³•å® 
	- å¯ä»¥ç”Ÿæˆ 
	- æ•°æ®å¤§å®åº“(database)
- æ•°æ®å¤§å®åº“é‡Œé¢
	- æœ‰å®ç®±(table)
- å®ç®±é‡Œé¢æœ‰æ ¼å­
	- ä¹Ÿå°±æ˜¯åˆ—(column)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650453524590)

- tableå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥

|åŠŸèƒ½|ä½œç”¨|
|---|---|
|æ–°å»ºè¡¨æ ¼ |CREATE TABLE |
|åˆ é™¤è¡¨æ ¼| DROP TABLE |
| ä¿®æ”¹è¡¨æ ¼ | ALTER TABLE |
|è¡¨æ ¼æè¿° | \d <br/> \d oeasy* <br/>\d ?? <br/>|
- æœ‰äº†å®ç®±
  - å¦‚ä½•çœ‹å®ç®±(table)é‡Œé¢
  - æœ‰äº›ä»€ä¹ˆ`å®è´`å‘¢ï¼ŸğŸ¤”

### å…ˆæœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650162952918)

- è¿™æ¬¡çš„å…³é”®å­—åº”è¯¥æ˜¯ 
	- SELECT

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163427767)

- ä¸Šé¢è¿™ä¸ªåº”è¯¥æ˜¯æœ‰ä¸€ä¸ªè¡¨
	- å«åš pg_tables 
- pg_tables 
	- è®°å½•ç€æ‰€æœ‰çš„è¡¨

### åœ¨æœ¬æœºæŸ¥è¯¢

- åœ¨æœ¬æœºæŸ¥è¯¢å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163583401)

- æ‰¾åˆ°æœ€åçš„urlç½‘å€
	- çœ‹çœ‹ä¾‹å­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163603483)

- è¿™ä¸ªä¾‹å­å¥½ç®€å•

### è¯•ç»ƒ

```sql
SELECT 1 + 1;
```

- æŸ¥è¯¢åˆ°ä¸€è¡Œ
	- åˆ—å?column?
	- ç»“æœä¸º 2

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163662967)

- è¿™æœ‰ä»€ä¹ˆæ„ä¹‰å—ï¼Ÿ
	- æ¯”å¦‚è¯´ç»¼åˆæ’åº
		- å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯è®¡ç®—
- å¯ä»¥æŠŠ pg å½“åšè®¡ç®—å™¨æ¥ç”¨äº†ğŸ˜„
	- å¯ä»¥åšå¤§æ•°è®¡ç®—ä¹ˆï¼Ÿ

### å¤§æ•°


```sql
SELECT 100000000 + 10000000000;
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657804636563)

- å¥½åƒå¯ä»¥
	- è®¡ç®—å¾ˆå¤§çš„æ•´æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657804682395)

- æ”¯æŒ
	- æ›´å¤§æ•°çš„è¿ç®—å—ï¼Ÿ

### è¶…çº§å¤§

- è¶…çº§å¤§çš„
	- ä¹Ÿå¯ä»¥ï¼ï¼ï¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657804743138)

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657804754718)

- å¤„ç†å¾—æŒºå¥½çš„
	- å¦‚ä½•ç†è§£ SELECT å‘¢ï¼Ÿ

### ç†è§£ SELECT

- SELECT è¿™ä¸ªå‘½ä»¤
  - æ—¢ä¸ 
	- æ–°å»ºåˆ é™¤å®åº“
  - ä¹Ÿä¸
	- æ–°å»ºåˆ é™¤è¡¨
- åªæ˜¯ 
	- å‘å‡ºä¸€ä¸ªé—®é¢˜
- åªæ±‚
	- è¿”å›ä¸€ä¸ªç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650455817337)

- å‘é€çš„è¿™ä¸ªä¸œè¥¿å°±å«åš query
	- query ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

### Query

- æå‡ºä¸€ä¸ª
	- è¯¢é—®
	- question

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650455860353)

- ä¸“ä¸šæœ¯è¯­å«åš
	- å‘å‡ºä¸€ä¸ªæŸ¥è¯¢(query)
	- å°±æ˜¯å»é—®ä¸ªäº‹æƒ…

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678368658131)

- æˆ‘ä»¬ç”¨çš„è¯­è¨€å°±æ˜¯SQL
	- Structured `Query` Language
	- ç»“æ„åŒ–`æŸ¥è¯¢`è¯­è¨€

### ç»§ç»­æé—®

```sql
SELECT 
	version();
```

- æŸ¥è¯¢å½“å‰ pg çš„ç‰ˆæœ¬å·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163928050)

- è½¯ä»¶
	- ç‰ˆæœ¬å·ä¸º 12.9
	- æ¶æ„ä¸º x86-64
	- ç³»ç»Ÿä¸º linux 20.04
	- ä½¿ç”¨çš„ç¼–è¯‘å™¨ä¸º gcc (Ubuntu 9.3.0-17ubuntu1~20.04)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163936733)

- æœ‰é—®å¿…æœ‰ç­”

### ç¬¬ä¸‰é—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650163427767)

```sql
SELECT 
	*
FROM
	pg_tables
;
``` 

- åˆ‡æ¢åˆ° postgresæ•°æ®åº“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678368749884)

- ç„¶åæŸ¥è¯¢

### 70è¡Œæ•°æ®

- è¿”å›çš„æ˜¯ç»“æœé›†(result set)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678368796483)

- å¯ä»¥é€æ¡è®°å½•è¿›è¡Œå±•ç¤ºå—ï¼Ÿ

### é€ä¸ªè®°å½• \x

- \?
	- æŸ¥è¯¢psqlå‘½ä»¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678368875737)

- \x
	- å¯ä»¥å°†è¡¨æ ¼å±•ç¤º
		- åˆ‡æ¢ä¸ºé€æ¡è®°å½•å±•ç¤º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678369019237)

- å†æ¬¡æŒ‰ä¸‹\xå¯ä»¥åˆ‡æ¢å›æ¥

### \t å¼€å…³

- é™¤äº†\xå¼€å…³ä¹‹å¤–
	- è¿˜æœ‰ä¸ª\tå¼€å…³

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678369196138)

- å¼€äº†ä¹‹ååªæ˜¾ç¤ºè®°å½•
	- ä¸æ˜¾ç¤ºæ ‡é¢˜

### \t åªæ˜¾ç¤ºè®°å½• ä¸æ˜¾ç¤ºæ ‡é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678369283302)

- ä¸Šé¢çš„ å¼€äº†tuple
- ä¸‹é¢çš„ å…³äº†tuple

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230309-1678369309088)

- pg_tables
  - æ˜¯ç³»ç»Ÿè¡¨
  - é‡Œé¢å­˜å‚¨ç€æœ‰äº›ä»€ä¹ˆæ ·çš„è¡¨
- å¯ä»¥æ›´ç»†è‡´åœ°æè¿°ä¸€ä¸‹pg_tableså—ï¼Ÿ

### å…ˆæè¿°

- d(escribe)ä¸€ä¸‹ 
	- pg_tables è¿™ä¸ªè¡¨
- pg_tables 
	- æ˜¯ä¸€ä¸ªå…³äº table çš„ table

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650164441524)

- pg_tables è¡¨æœ‰ 8 åˆ—
  - æ–¹æ¡ˆå
  - è¡¨å
  - æ‰€æœ‰è€…
  - è¡¨ç©ºé—´
  - æ˜¯å¦æœ‰ç´¢å¼•
  - æ˜¯å¦æœ‰è§„åˆ™
  - æ˜¯å¦æœ‰è§¦å‘å™¨
  - è¡Œçš„å®‰å…¨æ€§
- å¯ä»¥æŸ¥è¯¢è‡ªå·±æ–°å»ºçš„ login è¡¨ä¹ˆï¼Ÿ

### æŸ¥è¯¢ login

```
SELECT 
	*
FROM
	login
;
```

- login ç¡®å®æœ‰ 2 åˆ—	
	- ä½†æ˜¯è¡¨ä¸­ 0 è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220417-1650166684619)

- ä¹Ÿå°±æ˜¯è¯´
	- æ²¡æœ‰æ•°æ®
	- å®ç®±ç»“æ„å†å¥½
	- ä¹Ÿ æ²¡ç”¨
- ç©ºå®ç®± 
	- å•¥ä¹Ÿæ²¡æœ‰

### ç©ºç®±å­

- æƒ³è¦ æŸ¥è¯¢è®°å½•
    - å¿…é¡» å¾€å®ç®±é‡Œé¢ æ”¾ä¸œè¥¿
	- ä¹Ÿå°±æ˜¯ å‘loginè¡¨é‡Œ
	- æ’æ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650456557774)

- å¯ä»¥ä¹ˆï¼Ÿ
	- æœ‰äº†å®ç‰©
- å°±å¯ä»¥ç”¨SELECT
	- è¦æ±‚ å°†å®ç‰©å‘ˆç°äº†ï¼ï¼ï¼ğŸ˜„

### æ€»ç»“

- SELECT æ˜¯æŸ¥è¯¢å‘½ä»¤
  - å¯ä»¥è®¡ç®— 2+2
  - å¯ä»¥æŸ¥è¯¢ç‰ˆæœ¬å·
  - è¿˜å¯ä»¥æŸ¥è¯¢æœ‰å“ªäº›è¡¨
    - SELECT \* FROM pg_tables;

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220420-1650456766122)

- ä½†æ˜¯
	- æ–°å»ºçš„ login è¡¨ä¸­
	- æ²¡æœ‰æ•°æ®
- å°±åƒ
  - æ•°æ®å®åº“çš„å®ç®±é‡Œé¢
  - æ²¡æœ‰å®è´ä¸€æ ·
- å¦‚ä½• 
	- æŠŠå®è´æ”¾åˆ°æ ¼å­é‡Œï¼ŸğŸ¤”
- æˆ–è€…è¯´
	- æŠŠæ•°æ®æ’åˆ°è¡¨é‡Œï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹
