---
show: step
version: 1.0
enable_checker: true
---

# åºåˆ—sequence

###  å›å¿†
- ä¸Šæ¬¡äº†è§£äº†idçš„æ¥æº
	- id å°±æ˜¯identification
		- æ˜¯ä¸€ç§å”¯ä¸€æ€§çš„æ ‡è¯†
- éœ€è¦ç»™idåˆ—æ·»åŠ çº¦æŸ(Constraint)
	- å”¯ä¸€æ€§çº¦æŸ UNIQUE
- ä½†æ˜¯åœ¨æ·»åŠ çº¦æŸçš„è¿‡ç¨‹ä¸­æŠ¥äº†é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686278976208)

- è¿™æ€ä¹ˆåŠå‘¢ï¼ŸğŸ¤”

### å»é™¤é‡å¤id

- ä¸»è¦æ˜¯åˆ˜å¤‡å’Œèµµäº‘idå·²ç»é‡å¤äº†
	- æ‰€ä»¥æ— æ³•è®¾ç½®æœ¬åˆ—ä¸ºå”¯ä¸€(UNIQUE)åˆ—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686279485457)

- å°†èµµäº‘è¿™æ¡è®°å½•åˆ é™¤ä¹‹å
	- å†è®¾ç½®idçš„å±æ€§

```
DELETE FROM heroes WHERE name = 'èµµäº‘';
```

### è®¾ç½®

```
ALTER TABLE 
    heroes
ADD UNIQUE(id)
;
```

- è¿™å›å¯ä»¥è®¾ç½®idåˆ—ä¸ºUNIQUE

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686279642744)

- ç„¶å\d heroes
	- æŸ¥çœ‹heroesè¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686279623326)

- ç¡®å®æ·»åŠ äº†ä¸€æ¡å”¯ä¸€çº¦æŸ

### å†å°è¯•

```
INSERT INTO heroes(id,name,fight,intelligence)
VALUES(1,'èµµäº‘',96,96);
```

- å†æ¬¡å°è¯•æ’å…¥èµµäº‘
	- æ³¨æ„èµµäº‘idä¸åˆ˜å¤‡idç›¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686296332295)

- ç”±äºidåˆ—ä¸Šæœ‰UNIQUEçº¦æŸ
	- é€ æˆäº†æ’å…¥å¤±è´¥
- å¦‚ä½•ç†è§£UNIQUEçº¦æŸå‘¢ï¼Ÿ

### UNIQUE

- https://www.postgresql.org/docs/16/sql-createtable.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686296620870)

- UNIQUE çº¦æŸä¸‹çš„åˆ—	
	- å¿…é¡»æ˜¯ä¸åŒçš„å€¼
- å¯ä»¥åˆ é™¤UNIQUEçº¦æŸå—ï¼Ÿ

### åˆ é™¤çº¦æŸ

```
\h ALTER TABLE
```

- å…ˆæŸ¥è¯¢å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297165356)

- ç„¶åæ‰¾åˆ°çº¦æŸçš„åå­—(constraint_name)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297266924)

- è§‚å¯Ÿçº¦æŸçš„åå­—
	- heroes_id_key

### å°è¯•åˆ é™¤çº¦æŸ

```
ALTER TABLE
    heroes
DROP CONSTRIANT
	heroes_id_key
;
```

- è¿è¡ŒæˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297307387)

- å†è§‚å¯Ÿè¡¨æ ¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297468889)

- çº¦æŸæ¶ˆå¤±äº†

### å†è§‚å¯Ÿæ–‡æ¡£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686296764623)

- å¥½åƒä¸å…‰å¯ä»¥å¯¹äºå•ä¸ªåˆ—è®¾ç½®UNIQUE
	- è¿˜å¯ä»¥å¯¹å‡ ä¸ªåˆ—è®¾ç½®UNIQUE
	- è¿™å¦‚ä½•ç†è§£ï¼Ÿ

### å¯¹ä¸¤ä¸ªåˆ—è®¾ç½®UNIQUE

```
ALTER TABLE
    heroes
ADD
    UNIQUE(id,fight)
```

- å¯¹ä¸¤åˆ—è®¾ç½®UNIQUE

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297601603)

- è®¾ç½®ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297639153)

- äº§ç”Ÿäº†ä¸¤åˆ—çš„UNIQUE

### éªŒè¯çº¦æŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686297907813)

- åªæœ‰idå’Œfightéƒ½åŒæ—¶ç›¸åŒçš„çš„æ—¶å€™
	- æ‰ä¼š æ’å…¥å¤±è´¥
	- å¦åˆ™ ä¼šæ’å…¥æˆåŠŸ
- æˆ‘ä»¬å…ˆè¯•è¯•
	- å¦‚æœåªæœ‰idç›¸åŒ
	- ä½†æ˜¯æ­¦åŠ›ä¸ç›¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686298220201)

```
INSERT INTO 
    heroes(id,name,fight,intelligence)
VALUES
    (1,'èµµäº‘',95,95);
```

- æ’å…¥æˆåŠŸ

### idä¸åŒï¼Œä½†æ­¦åŠ›ç›¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686298251722)

- æ­¦åŠ›ä¸å…³ç¾½ç›¸åŒ
- idä¸åˆ˜å¤‡ç›¸åŒ
- ä½†æ˜¯æ­¦åŠ›ã€idä¸åŒæ—¶ç›¸åŒ

```
INSERT INTO 
    heroes(id,name,fight,intelligence)
VALUES
    (1,'èµµäº‘',96,96);
```

### å¦‚æœæ­¦åŠ›ã€idéƒ½ç›¸åŒ

- å¦‚æœä¸¤é¡¹åŒæ—¶ç›¸åŒ
	- æ•°æ®æ˜¯æ— æ³•æ’å…¥çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686298353549)

- è¿™å°±æ˜¯å¤šä¸ªåˆ—ä¸Šçš„UNIQUEçº¦æŸçš„å®šä¹‰
- ä¸€èˆ¬ä¼šç”¨åˆ°ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ

### å…·ä½“åº”ç”¨åœºæ™¯

- æ¯”å¦‚è¯´ä¸‹å›¾æ˜¯ä¸€ä¸ªERå›¾
	- Entity-relationship model

- å›¾å½¢çš„å«ä¹‰å¦‚ä¸‹
	- çŸ©å½¢çš„æ˜¯å®ä½“è¡¨
	- åœ†å½¢çš„æ˜¯å®ä½“è¡¨çš„å­—æ®µ
	- è±å½¢çš„æ˜¯å…³ç³»è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686300100064)

- åœ¨å­¦ä¹ å…³ç³»ä¸­
	- å­¦ç”Ÿå’Œè¯¾ç¨‹éƒ½ç›¸åŒçš„è¯
	- å°±ç®—é‡å¤
- åœ¨è¯¾ç¨‹æ‰€å±å…³ç³»è¡¨ä¸­
	- è¯¾ç¨‹å’Œè€å¸ˆéƒ½ç›¸åŒçš„è¯
	- å°±ç®—é‡å¤
- è¿™ä¸¤ä¸ªåœ°æ–¹
	- åº”è¯¥æœ‰ç›¸åº”çš„çº¦æŸ

### å»ºè¡¨ç»†èŠ‚

- https://www.postgresql.org/docs/12/ddl-constraints.html#DDL-CONSTRAINTS-UNIQUE-CONSTRAINTS

- å¦‚æœæ˜¯å•åˆ—çš„å”¯ä¸€æ€§çº¦æŸ
	- ç”¨ä¸‹å›¾ä¸­å‰ä¸¤ç§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686304334283)

- å¦‚æœæ˜¯å¤šåˆ—çš„å”¯ä¸€æ€§çº¦æŸ
	- ç”¨ä¸Šå›¾ä¸­æœ€åä¸€ç§

## æ€»ç»“

- è¿™æ¬¡äº†è§£äº† åœ¨ä¸¤ä¸ªåˆ—ä¸Šçš„UNIQUEçº¦æŸ
	- åªæœ‰ä¸¤åˆ—éƒ½ç›¸åŒçš„æ—¶å€™
	- æ‰ä¼šæ‹’ç»æ’å…¥
- ç»§ç»­çœ‹æ–‡æ¡£
	- https://www.postgresql.org/docs/16/sql-createtable.html 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230609-1686300401457)

- ä»€ä¹ˆæ˜¯NULLå‘¢ï¼Ÿ
	- å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ï¼ŸğŸ‘‹ğŸ»