---
show: step
version: 1.0
enable_checker: true
---

# 安装卸载

## 回忆

- 我们了解了数据库的排行
- 分析了前三名
  - oracle
  - mysql
  - mssql server
- 最后选用的是 postgres
- 话说什么是数据库来着？🤔

### 法宝

- 数据库就是数据的宝库
- postgreSQL 是数据库管理程序
  - 数据库管理程序也叫 DBMS
  - DataBase Management System
  - 可用他管理数据宝库

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650374877504)

- 可以造出来数据宝库
- 我们装上了 postgresql
  - 也就有了制造数据宝库的法宝
- 卸载 postgres
  - 也就是废掉可以制造数据宝库的法宝

## 安装

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650372928915)

- 我们尝试直接运行 psql
  - 系统报错
  - 找不到 psql 这个程序
  - 所以无法执行
- 然后我们安装 postgresql
  - sudo是用管理员权限执行命令的意思

```bash
sudo apt install postgresql
```

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650373674057)

- 如果不能安装的话
  - 按照提示的文字先更新

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657802722926)

### 更新

```bash
sudo apt update
sudo apt install postgresql
```

- 有询问的地方回答 yes
- apt 是 Advanced Package Tool(高级包工具)
- 可以在 [000202 软件包管理 apt](https://www.lanqiao.cn/courses/2712?tab=labsList) 中找到详细资料
- 装好了之后看一下这个软件安装情况

### 查看软件

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650375345192)

- 软件确实装上了
- 运行 psql 试试

### 尝试运行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649982377055)

- 又报错了
- 不过不是找不到程序
  - 这就说明原来没有 psql
  - 现在有了
- 这个报错怎么处理？
- 错误本身就是答案！

### 搜索

- 报错了 看一看
- 错误本身就是答案
- 报错语句复制下来
- 搜索的结果就是答案

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649982514055)

- 无法连接服务器的原因
  - 应该就是没有启动postgres服务
- postgres服务没启动
  - 所以连不上 postgres 数据库服务器
- 问题是如何启动呢？🤔

### 搜索

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649983590194)

### 启动服务

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650373260592)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650373396210)

- 好了
- 终于服务起来了

### 再次尝试启动psql

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650373905323)

- 尝试使用 postgres 用户登录
  - 失败了
- 用管理员权限强制 postgres 登录
  - 终于成功！！！
- postgres 把系统管理员和数据库管理员角色做了隔离
  - 怕管理员不懂数据库进行误操作
  - 所以单独有一个专门的账号 postgres
  - 作为数据库管理员 dba(database administrator)
- 我如果就想作为 postgres 登录怎么办呢？
  - 得退出 postgres
  - 回到 shell
- 怎么退出呢？

### 查看帮助

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650374145868)

- 现在的任务是用 postgres 登录 shell
- 然后直接运行 psql

### 继续搜索

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649984594603)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649984604172)

### 修改密码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220714-1657803227185)

- 更新 postgres 用户的密码
- 然后使用 postgres 和新密码登录

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649984807674)

- 真的用 postgres 用户登录上去了😄
  - 并且可以用 postgres 用户运行psql！！！
- 可以安装软件
  - 也可以卸载么？

### 卸载postgresql

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220415-1649985193633)

- sudo apt remove postgresql*
  - 注意结尾的星号
  - 星号就是通配符(混儿)
  - 可以代表任意多个任何字符
  - postgresql-12、postgresql-common 等都会被卸载

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220419-1650375090968)

- 卸载之后，psql 程序就找不到了
- 法宝就被废掉了
  - 不能用了

## 总结

- postgres是我们的法宝
  - 用他可以建造数据宝库
- 我们安装了 postgrsql
- 然后进入了 postgresql
  - 先用管理员权限进入
  - 再修改 postgres 用户密码进入
- 最后我们卸载了 postgresql
- 到底怎么建立起属于自己的数据宝库呢？🤔
- 下次再说 👋
